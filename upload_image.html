---
layout: upload_image_base
---
<div data-error-key="uploader" class="control-group uploader from_file solid">
    <label class="control-label">File to upload</label>
    <div class="controls">
        <div style="padding-top: 5px; position: relative;" id="container">
            <input type="text" id="id_uploaded_file" name="uploaded_file" readonly="" tabindex="4">
            <button id="id_uploaded_file_button" class="btn" style="position: relative; z-index: 0;" tabindex="5">Select</button>
            <span class="help-inline"><a href="#" id="upload_switcher"><i class="icon-resize-horizontal"></i>From Url</a></span>
        </div>
    </div>
    <div id="autoupload_container" class="controls hide">
        <input type="checkbox" id="autoupload" name="autoupload"> Auto submit form after file upload
    </div>
</div>
<div class="control-group disk-format">
    <label class="control-label"> Disk format </label>
    <div class="controls">
        <label class="radio inline">
            <input type="radio" checked="" value="raw" name="disk_format" tabindex="6"> raw
        </label>
        <label class="radio inline">
            <input type="radio" value="qcow2" name="disk_format" tabindex="6"> qcow2
        </label>
    </div>
</div>
<!-- TODO: remove this code later in production version -->
<script>
    $(document).on('click', '#upload_switcher', function(event){
        if ($('.uploader').hasClass('from_file')){
            $('.uploader').html('<label class="control-label">URL</label><div class="controls"><input type="text" id="image_url"><span class="help-inline"><a href="#" id="upload_switcher"><i class="icon-resize-horizontal"></i>From Url</a></span></div>');
            $("#upload_switcher").html('<i class="icon-resize-horizontal"></i>&nbsp;From Local Disk</a>');
        }else{
            $('.uploader').html('<label class="control-label">Local File</label><div class="controls"><input type="text" id="id_uploaded_file" name="uploaded_file" readonly="">&nbsp;<button id="id_uploaded_file_button" class="btn" style="position: relative; z-index: 0;">Select</button><span class="help-inline"><a href="#" id="upload_switcher"><i class="icon-resize-horizontal"></i>From Local Disk</a></span></div>');
            $("#upload_switcher").html('<i class="icon-resize-horizontal"></i>&nbsp;From Url</a>');
            $("#id_name").val("");
        }
        $('.uploader').toggleClass('from_file');
        event.preventDefault();
    });
    $(document).on('click', '.recommended_images li a', function(){
        if ($('.uploader').hasClass('from_file')){
            $("#upload_switcher").click();
        }
        if (!$('.uploader').hasClass('from_file')){
            $("#image_url").val($(this).attr('href'));
            $("#id_name").val($(this).attr('name')).focus();
        }
        return false;
    });
</script>
